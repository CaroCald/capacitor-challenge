{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/auth/guards/auth.guard.ts","./src/app/auth/guards/public.guard.ts","./src/app/auth/services/auth.service.ts","./src/app/shared/pages/error404-page/error404-page.component.ts","./src/app/shared/pages/error404-page/error404-page.component.html","./src/app/shared/shared.module.ts","./src/environments/environments.ts","./src/main.ts","./node_modules/@ionic/pwa-elements/dist/esm/ lazy ^\\.\\/.*\\.entry\\.js$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$ namespace object"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { Error404PageComponent } from './shared/pages/error404-page/error404-page.component';\n\nimport { AuthGuard } from './auth/guards/auth.guard';\nimport { PublicGuard } from './auth/guards/public.guard';\n\n// dominio.com/\nconst routes: Routes = [\n  {\n    path: 'auth',\n    loadChildren: () => import('./auth/auth.module').then( m => m.AuthModule ),\n    canActivate: [ PublicGuard ],\n    canMatch: [ PublicGuard ]\n  },\n  {\n    path: 'heroes',\n    loadChildren: () => import('./heroes/heroes.module').then( m => m.HeroesModule ),\n    canActivate: [ AuthGuard ],\n    canMatch: [ AuthGuard ]\n  },\n  {\n    path: '404',\n    component: Error404PageComponent,\n  },\n  {\n    path: '',\n    redirectTo: 'heroes',\n    pathMatch: 'full'\n  },\n  {\n    path: '**',\n    redirectTo: '404',\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent  {\n  title = 'heroesApp';\n\n}\n","\n<router-outlet></router-outlet>\n","import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { SharedModule } from './shared/shared.module';\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    HttpClientModule,\n\n    AppRoutingModule,\n    SharedModule,\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, CanMatch, Route, UrlSegment, UrlTree, RouterStateSnapshot, Router } from '@angular/router';\nimport { Observable, tap } from 'rxjs';\n\nimport { AuthService } from '../services/auth.service';\n\n@Injectable({ providedIn: 'root' })\nexport class AuthGuard implements CanMatch, CanActivate {\n\n\n  constructor(\n    private authService: AuthService,\n    private router: Router,\n  ) { }\n\n  private checkAuthStatus(): boolean | Observable<boolean> {\n\n    return this.authService.checkAuthentication()\n      .pipe(\n        tap( isAuthenticated => console.log('Authenticated:', isAuthenticated ) ),\n        tap( isAuthenticated => {\n          if ( !isAuthenticated ) {\n            this.router.navigate(['./auth/login'])\n          }\n        }),\n\n      )\n\n  }\n\n\n  canMatch(route: Route, segments: UrlSegment[]): boolean | Observable<boolean> {\n    // console.log('Can Match');\n    // console.log({ route, segments })\n    return this.checkAuthStatus();\n  }\n\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean | Observable<boolean> {\n    // console.log('Can Activate');\n    // console.log({ route, state })\n\n    return this.checkAuthStatus();\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { CanMatch, CanActivate, Router, Route, UrlSegment, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\nimport { Observable, tap, map } from 'rxjs';\nimport { AuthService } from '../services/auth.service';\n\n\n@Injectable({providedIn: 'root'})\nexport class PublicGuard implements CanMatch, CanActivate {\n\n  constructor(\n    private authService: AuthService,\n    private router: Router,\n  ) { }\n\n  private checkAuthStatus(): boolean | Observable<boolean> {\n\n    return this.authService.checkAuthentication()\n      .pipe(\n        tap( isAuthenticated => console.log('Authenticated:', isAuthenticated ) ),\n        tap( isAuthenticated => {\n          if ( isAuthenticated ) {\n            this.router.navigate(['./'])\n          }\n        }),\n        map( isAuthenticated => !isAuthenticated )\n      )\n\n  }\n\n\n  canMatch(route: Route, segments: UrlSegment[]): boolean | Observable<boolean> {\n    // console.log('Can Match');\n    // console.log({ route, segments })\n    return this.checkAuthStatus();\n  }\n\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean | Observable<boolean> {\n    // console.log('Can Activate');\n    // console.log({ route, state })\n\n    return this.checkAuthStatus();\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\nimport { Observable, tap, of, map, catchError } from 'rxjs';\n\nimport { environments } from '../../../environments/environments';\nimport { User } from '../interfaces/user.interface';\n\n@Injectable({providedIn: 'root'})\nexport class AuthService {\n\n  private baseUrl = environments.baseUrl;\n  private user?: User;\n\n  constructor(private http: HttpClient) { }\n\n  get currentUser():User|undefined {\n    if ( !this.user ) return undefined;\n    return structuredClone( this.user );\n  }\n\n  login( email: string, password: string ):Observable<User> {\n    // http.post('login',{ email, password });\n    return this.http.get<User>(`${ this.baseUrl }/users/1`)\n      .pipe(\n        tap( user => this.user = user ),\n        tap( user => localStorage.setItem('token', 'aASDgjhasda.asdasd.aadsf123k' )),\n      );\n  }\n\n  checkAuthentication(): Observable<boolean> {\n\n    if ( !localStorage.getItem('token') ) return of(false);\n\n    const token = localStorage.getItem('token');\n\n    return this.http.get<User>(`${ this.baseUrl }/users/1`)\n      .pipe(\n        tap( user => this.user = user ),\n        map( user => !!user ),\n        catchError( err => of(false) )\n      );\n\n  }\n\n\n  logout() {\n    this.user = undefined;\n    localStorage.clear();\n  }\n\n\n\n}\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-error404-page',\n  templateUrl: './error404-page.component.html',\n  styles: [\n  ]\n})\nexport class Error404PageComponent {\n\n}\n","<p>error404-page works!</p>\n","import { NgModule } from '@angular/core';\nimport { Error404PageComponent } from './pages/error404-page/error404-page.component';\n\n\n\n@NgModule({\n  declarations: [\n    Error404PageComponent\n  ],\n  exports: [\n    Error404PageComponent\n  ]\n})\nexport class SharedModule { }\n","\n\nexport const environments = {\n  baseUrl: 'https://my-json-server.typicode.com/AValleO/heroes-app-json-db'\n}\n","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { defineCustomElements } from '@ionic/pwa-elements/loader';\n\ndefineCustomElements(window);\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","var map = {\n\t\"./pwa-action-sheet.entry.js\": [\n\t\t5464,\n\t\t\"node_modules_ionic_pwa-elements_dist_esm_pwa-action-sheet_entry_js\"\n\t],\n\t\"./pwa-camera-modal-instance.entry.js\": [\n\t\t8724,\n\t\t\"node_modules_ionic_pwa-elements_dist_esm_pwa-camera-modal-instance_entry_js\"\n\t],\n\t\"./pwa-camera-modal.entry.js\": [\n\t\t8145,\n\t\t\"node_modules_ionic_pwa-elements_dist_esm_pwa-camera-modal_entry_js\"\n\t],\n\t\"./pwa-camera.entry.js\": [\n\t\t527,\n\t\t\"node_modules_ionic_pwa-elements_dist_esm_pwa-camera_entry_js\"\n\t],\n\t\"./pwa-toast.entry.js\": [\n\t\t4389,\n\t\t\"node_modules_ionic_pwa-elements_dist_esm_pwa-toast_entry_js\"\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(() => {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 5899;\nmodule.exports = webpackAsyncContext;"],"names":["RouterModule","Error404PageComponent","AuthGuard","PublicGuard","routes","path","loadChildren","then","m","AuthModule","canActivate","canMatch","HeroesModule","component","redirectTo","pathMatch","AppRoutingModule","forRoot","imports","exports","AppComponent","constructor","selectors","decls","vars","template","i0","BrowserModule","BrowserAnimationsModule","HttpClientModule","SharedModule","AppModule","bootstrap","declarations","tap","authService","router","checkAuthStatus","checkAuthentication","pipe","isAuthenticated","console","log","navigate","route","segments","state","factory","providedIn","map","of","catchError","environments","AuthService","http","baseUrl","currentUser","user","undefined","structuredClone","login","email","password","get","localStorage","setItem","getItem","token","err","logout","clear","defineCustomElements","window","__NgCli_bootstrap_1","bootstrapModule","catch","error"],"sourceRoot":"webpack:///","x_google_ignoreList":[12]}